CREATE DATABASE KartingDB;
USE KartingDB;
CREATE TABLE Usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username
    nombre VARCHAR(100) NOT NULL,
    apellidos
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    fotoPerfil guardar como blob,
    carrerasVictorias, 
    torneosVictorias, 
    provincia,
    fechaNacimiento,
    elo INT NOT NULL,
);

CREATE TABLE UsuarioRecompensas(
    id_usuario,
    id_recompensa,
    que se relacione
);

CREATE TABLE Kartings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    ciudad VARCHAR(100) NOT NULL,
    ubicacion VARCHAR(255) NOT NULL (LINK A GOOGLE MAPS LITERALMENTE)
);

CREATE TABLE Torneos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombreTorneo VARCHAR(100) NOT NULL,
    fecha_inicio DATE NOT NULL,
    fecha_fin DATE NOT NULL,
    nombreKarting SERA UNA CLAVE FORANEA DE tabla KARTINGS,

);

CREATE TABLE TorneoKartings ( Para si se celebra en uno o varios kartings el torneo 
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_torneo INT,
    id_karting INT,
    FOREIGN KEY (id_torneo) REFERENCES Torneos(id),
    FOREIGN KEY (id_karting) REFERENCES Kartings(id)
);
CREATE TABLE Inscripciones ( RELACIONA USUARIO CON TORNEOS
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_torneo INT,
    id_piloto INT,
    FOREIGN KEY (id_torneo) REFERENCES Torneos(id),
    FOREIGN KEY (id_piloto) REFERENCES Usuarios(id)
);
CREATE TABLE Carreras ( Están ligadas a un Karting, y opcionalmente a un Torneo.
    id INT AUTO_INCREMENT PRIMARY KEY,
    fecha DATE NOT NULL, AQUI GUARDAR LA FECHA Y HORA DE LA CARRERA
    id_karting INT,
    id_torneo INT NULL,
    FOREIGN KEY (id_karting) REFERENCES Kartings(id),
    FOREIGN KEY (id_torneo) REFERENCES Torneos(id)
);

CREATE TABLE ResultadosCarreras ( Guarda el tiempo total y la posición de cada piloto en cada carrera. Se puede usar para calcular los puntos del torneo.
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_carrera INT,
    id_piloto INT,
    posicion INT NOT NULL,
    tiempoTotal TIME NOT NULL,
    FOREIGN KEY (id_carrera) REFERENCES Carreras(id),
    FOREIGN KEY (id_piloto) REFERENCES Usuarios(id)
);

CREATE TABLE ResultadosTorneo ( Ranking final del torneo para cada piloto (puntosTorneo). Se calculara posicion por puntosTorneo
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_torneo INT,
    id_piloto INT,
    puntosTorneo INT NOT NULL,
    FOREIGN KEY (id_torneo) REFERENCES Torneos(id),
    FOREIGN KEY (id_piloto) REFERENCES Usuarios(id)
);

CREATE TABLE Temporadas (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL, TEMPORADA 2025/2026 por ejemplo
    fecha_inicio DATE NOT NULL, 
    fecha_fin DATE NOT NULL
);

CREATE TABLE TemporadaUsuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_temporada INT,
    id_piloto INT,
    puntos INT NOT NULL DEFAULT 0,
    FOREIGN KEY (id_temporada) REFERENCES Temporadas(id),
    FOREIGN KEY (id_piloto) REFERENCES Usuarios(id)
);

CREATE TABLE Recompensas (
    id
    nombre,
    imagen,
    fechaInicioRecompensa,
    fechaLimiteRecompensa
)